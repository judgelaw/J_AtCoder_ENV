# J AtCoder Environment Container

AtCoderのジャッジサーバーと**ほぼ同等のコンパイルオプション・実行環境**を、VS Code + Dockerで手軽に再現するための開発コンテナです。

### 対応言語
* C / C++ (機械学習系などの一部ライブラリは省略しています)
* Python 3
* Rust

### インストールされる拡張機能
このコンテナを開くと、以下の拡張機能が自動的にインストールされ、すぐに利用可能になります。

#### ■ C/C++
* **C/C++ (ms-vscode.cpptools)**
  - コード補完、エラー指摘、およびデバッグ機能をまとめて提供します。
* **C/C++ Themes (ms-vscode.cpptools-themes)**
  - C++のコードを見やすくハイライトします。

#### ■ Python
* **Python (ms-python.python)**
  - Pythonの実行、デバッグ、コード補完を提供する必須機能です。
* **Pylance (ms-python.vscode-pylance)**
  - 型チェックや高速な補完を行い、書き間違いを未然に防ぎます。
* **debugger for debugpy (ms-python.debugpy)**
  - コードを1行ずつ止めて、変数の値を確認しながらデバッグできます。

#### ■ Rust
* **rust-analyzer (rust-lang.rust-analyzer)**
  - 非常に強力なコード補完と型推論を表示します。
* **CodeLLDB (vadimcn.vscode-lldb)**
  - Rustのコードをステップ実行してバグを探すためのデバッガです。

#### ■ 便利ツール (Utility)
* **Error Lens (usernamehw.errorlens)**
  - エラーメッセージを、コードのすぐ横に常に表示します。
* **Live Share (ms-vsliveshare.vsliveshare)**
  - 他の人のVS Codeと接続して、リアルタイムでコードを共有・共同編集できます。
---

## 1. 準備するもの

### 推奨PC環境
DockerおよびWSL2を安定して動作させるため、以下の環境を推奨します。
* **メモリ**: 最低 4GB（**8GB以上**を強く推奨）
* **ストレージ**: 10GB 以上の空き容量
* **OS**: Windows 10/11 (64bit)

実行にあたり、以下のツールがインストールされている必要があります。

* **VS Code**
* **Dev Containers** (VS Code 拡張機能)
* **Docker Desktop** (または Docker Engine)
* **WSL 2** (Windowsユーザーの場合、Ubuntuなど適当なディストリビューションを入れておいてください)

## 2. セットアップ手順（WSL 2 推奨構成）
本環境は、動作速度の向上のため **WSL 2 (Linux)** 上に配置して利用することを推奨します。
本環境のパフォーマンスを最大化するため、以下の順番で設定を行ってください。

### 手順 A： WSL 2 の最適化設定 (.wslconfig)(初回のみ)
WSL 2 が使用するメモリなどを制限・最適化します。
1. Windowsのユーザーフォルダ（`C:\Users\<ユーザー名>`）に `.wslconfig` という名前のファイルを作成します。このリポジトリ内にも含めているので、必要があればコピーして使用するPCのCPU,メモリに合わせて内容を書き換えてください 
2. すでに WSL が起動している場合は、PowerShell で `wsl --shutdown` を実行して完全に停止させてください。

### 手順 B： VS Code で WSL に接続する
1. VS Code を起動し、左下の **青いアイコン (><)** をクリックします。
2. 表示されたメニューから **[WSL への接続 (Connect to WSL)]** を選択します。

### 手順 C：プロジェクトの取得 (初回のみ)
以下の手順などで、PCにリポジトリを複製できます。
#### 方法1：VS Codeの機能を使う（推奨）
1. VS Codeを起動し、メニューの **[ファイル] > [新しいウィンドウ]** を開きウェルカムページを表示します。
2. **[Git リポジトリのクローン]** をクリックします。
3. このリポジトリのURLを貼り付けて `Enter` を押します。
   `https://github.com/judgelaw/J_AtCoder_ENV.git`
4. 保存先のフォルダ(/home/<ユーザー名> など)を選択すると、自動的にダウンロードが始まります。

#### 方法2：コマンドを使う
ターミナル(bash)を開き、任意のフォルダで以下のコマンドを実行してプロジェクトをダウンロードします。

```bash
git clone https://github.com/judgelaw/J_AtCoder_ENV.git
```

### 手順 D：コンテナの起動
1. コンテナを作成・起動する前に、**Docker Desktop を起動**しておいてください。
   - ※「Dockerデーモンが実行されていることを確認してください」というエラーが出る場合は、Dockerが起動していないサインです。
   - Docker Desktop の設定で `Settings > Resources > WSL Integration` が有効になっていることを確認してください。複数の Linux（Ubuntuなど）を入れている場合は、使用するディストリビューションのスイッチを ON にします。
2. **プロジェクトを開く**
   本フォルダをVS Codeで開きます。
3. **コンテナを起動する**
   右下に出てくるポップアップ、もしくは画面左下のアイコン（`><`）をクリックし、**[コンテナで再度開く / Reopen in Container]** を選択してください。
> [!WARNING]
> 初回起動時はイメージのビルドに**10分以上**かかることがあります。進捗は右下の通知から **[開発コンテナ―への接続(ログの表示)]** を選択して確認できます。バックグラウンドで処理が進んでいるか確認しつつそのままお待ちください。
4. **コードを書いて実行する**
   - ワークスペース内であれば、ディレクトリ階層を問わず、ファイルを開いた状態で実行コマンドを入力するとコンパイル＆実行が可能です。各言語ごとにシェルスクリプトを作成しており、以下のショートカットキーで実行可能です。
   - Rustファイルはビルド速度と構成の都合上、実行対象のファイルを一度`src/main.rs` に自動コピーしてからビルド/実行します。
   - AtCoderコンテスト用のファイル自動作成ツールも以下に用意しています。
   - 各言語の動作確認用のtestファイルを`Sample/`フォルダに用意しています。問題は以下のものを使用しています。
   使用問題:[AWC0001-E問題](https://atcoder.jp/contests/awc0001/tasks/awc0001_e)

## 3. ショートカットキー

本環境では、以下のショートカットキーでコードの実行が行えます。

| 操作 | ショートカット | 内容 |
| :--- | :--- | :--- |
| **ビルド・実行** | `Ctrl` + `Shift` + `B` | ジャッジ環境に近いオプションでコンパイルし、実行します。 |
| **実行のみ** | `Ctrl` + `F1` | コンパイルをスキップして、直前のバイナリを実行します。 |

> [!NOTE]
> `Ctrl + F1` を有効にするには、`/.vscode/keybind.json` の内容を、お使いのVS Code本体の `keybindings.json` にコピーして貼り付けてください。

## 4. ファイル作成自動化ツール (gen.sh) の仕様
- **ファイル構成**: `ABC/350/A.cpp` のように、コンテストフォルダ直下に各問題のファイルを作成します。
すでに同名のファイルが存在する場合は、**上書きせずにスキップ**します。
- **使用法**:ターミナルで`gen`コマンドを実行します。
 `gen [コンテスト名] [問題数と使用する言語(任意: c/cpp/py/rs)]`
  - コンテスト名が`ABC`,`ARC`,`AGC`,`AHC`,`AWC`,`ADT`から始まる場合は専用フォルダが作成されます。
  その際、小文字で入力した場合は大文字に変換されます。
  - コンテスト名がそれ以外の場合は`OtherContest`フォルダに格納されます。
  - 問題作成数は99まで対応しています
  - コンテスト名以外の引数はどの順番でも大丈夫です。
- **実行例**:
  - `gen abc350` : A-Gの問題ファイル (C++:gen.shで指定しているデフォルト言語) を作成。
  - `gen arc150 py 3` : A-Cの問題ファイル (Python) を作成。

---